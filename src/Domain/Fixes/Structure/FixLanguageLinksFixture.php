<?php

namespace MDWiki\NewHtml\Domain\Fixes\Structure;

$GLOBALS['MDWIKI_CODE_TO_LANG'] = [
    'ab' => 'Abkhaz',
    'ace' => 'Acehnese',
    'af' => 'Afrikaans',
    'ak' => 'Akan',
    'als' => 'Alemannic',
    'am' => 'Amharic',
    'an' => 'Aragonese',
    'ang' => 'Anglo-Saxon',
    'ar' => 'Arabic',
    'arc' => 'Assyrian',
    'as' => 'Assamese',
    'ast' => 'Asturian',
    'av' => 'Avar',
    'ay' => 'Aymara',
    'az' => 'Azerbaijani',
    'ba' => 'Bashkir',
    'bar' => 'Bavarian',
    'bat-smg' => 'Samogitian',
    'bcl' => 'Bicolano',
    'be' => 'Belarusian',
    'be-x-old' => 'Belarusian',
    'bg' => 'Bulgarian',
    'bh' => 'Bihari',
    'bi' => 'Bislama',
    'bm' => 'Bambara',
    'bn' => 'Bengali',
    'bo' => 'Tibetan',
    'bpy' => 'Bishnupriya',
    'br' => 'Breton',
    'bs' => 'Bosnian',
    'bug' => 'Buginese',
    'bxr' => 'Buriat',
    'ca' => 'Catalan',
    'cbk-zam' => 'Chavacano',
    'cdo' => 'Min Dong',
    'ce' => 'Chechen',
    'ceb' => 'Cebuano',
    'ch' => 'Chamorro',
    'chr' => 'Cherokee',
    'chy' => 'Cheyenne',
    'ckb' => 'Sorani',
    'co' => 'Corsican',
    'cr' => 'Cree',
    'cs' => 'Czech',
    'csb' => 'Kashubian',
    'cu' => 'Old Church Slavonic',
    'cv' => 'Chuvash',
    'cy' => 'Welsh',
    'da' => 'Danish',
    'de' => 'German',
    'diq' => 'Zazaki',
    'dsb' => 'Lower Sorbian',
    'dv' => 'Divehi',
    'dz' => 'Dzongkha',
    'ee' => 'Ewe',
    'el' => 'Greek',
    'eml' => 'Emilian',
    'en' => 'English',
    'eo' => 'Esperanto',
    'es' => 'Spanish',
    'et' => 'Estonian',
    'eu' => 'Basque',
    'ext' => 'Extremaduran',
    'fa' => 'Persian',
    'ff' => 'Fula',
    'fi' => 'Finnish',
    'fiu-vro' => 'Voro',
    'fj' => 'Fijian',
    'fo' => 'Faroese',
    'fr' => 'French',
    'frp' => 'Franco-Provencal',
    'fur' => 'Friulan',
    'fy' => 'West Frisian',
    'ga' => 'Irish',
    'gag' => 'Gagauz',
    'gan' => 'Gan',
    'gd' => 'Scottish Gaelic',
    'gl' => 'Galician',
    'glk' => 'Gilaki',
    'gn' => 'Guarani',
    'got' => 'Gothic',
    'gu' => 'Gujarati',
    'gv' => 'Manx',
    'ha' => 'Hausa',
    'hak' => 'Hakka',
    'haw' => 'Hawaiian',
    'he' => 'Hebrew',
    'hi' => 'Hindi',
    'hif' => 'Fiji Hindi',
    'ho' => 'Hiri Motu',
    'hr' => 'Croatian',
    'hsb' => 'Upper Sorbian',
    'ht' => 'Haitian',
    'hu' => 'Hungarian',
    'hy' => 'Armenian',
    'hz' => 'Herero',
    'ia' => 'Interlingua',
    'id' => 'Indonesian',
    'ie' => 'Interlingue',
    'ig' => 'Igbo',
    'ii' => 'Nosan',
    'ik' => 'Inupiaq',
    'ilo' => 'Ilokano',
    'io' => 'Ido',
    'is' => 'Icelandic',
    'it' => 'Italian',
    'iu' => 'Inuktitut',
    'ja' => 'Japanese',
    'jbo' => 'Lojban',
    'jv' => 'Javanese',
    'ka' => 'Georgian',
    'kaa' => 'Karakalpak',
    'kab' => 'Kabyle',
    'kbd' => 'Kabardian',
    'kg' => 'Kongo',
    'ki' => 'Kikuyu',
    'kj' => 'Kwanyama',
    'kk' => 'Kazakh',
    'kl' => 'Greenlandic',
    'km' => 'Khmer',
    'kn' => 'Kannada',
    'ko' => 'Korean',
    'koi' => 'Komi-Permyak',
    'kr' => 'Kanuri',
    'ks' => 'Kashmiri',
    'ksh' => 'Ripuarisch',
    'ku' => 'Kurdish',
    'kv' => 'Komi',
    'kw' => 'Cornish',
    'ky' => 'Kirghiz',
    'la' => 'Latin',
    'lad' => 'Ladino',
    'lb' => 'Luxembourgish',
    'lbe' => 'Lak',
    'lez' => 'Lezgian',
    'lg' => 'Ganda',
    'li' => 'Limburgian',
    'lij' => 'Ligurian',
    'lmo' => 'Lombard',
    'ln' => 'Lingala',
    'lo' => 'Lao',
    'lt' => 'Lithuanian',
    'lv' => 'Latvian',
    'map-bms' => 'Banyumasan',
    'mdf' => 'Moksha',
    'mg' => 'Malagasy',
    'mh' => 'Marshallese',
    'mi' => 'Maori',
    'mk' => 'Macedonian',
    'ml' => 'Malayalam',
    'mn' => 'Mongolian',
    'mo' => 'Moldovan',
    'mr' => 'Marathi',
    'mrj' => 'Hill Mari',
    'ms' => 'Malay',
    'mt' => 'Maltese',
    'mus' => 'Muscogee',
    'mwl' => 'Mirandese',
    'my' => 'Burmese',
    'myv' => 'Erzya',
    'mzn' => 'Mazandarani',
    'na' => 'Nauruan',
    'nah' => 'Nahuatl',
    'nap' => 'Neapolitan',
    'nds' => 'Low German',
    'nds-nl' => 'Low Saxon',
    'ne' => 'Nepali',
    'new' => 'Newar',
    'ng' => 'Ndonga',
    'nl' => 'Dutch',
    'nn' => 'Norwegian Nynorsk',
    'no' => 'Norwegian',
    'nov' => 'Novial',
    'nrm' => 'Norman',
    'nv' => 'Navajo',
    'ny' => 'Chichewa',
    'oc' => 'Occitan',
    'om' => 'Oromo',
    'or' => 'Oriya',
    'os' => 'Ossetian',
    'pa' => 'Punjabi',
    'pag' => 'Pangasinan',
    'pam' => 'Pampanga',
    'pap' => 'Papiamento',
    'pcd' => 'Picard',
    'pdc' => 'Pennsylvania German',
    'pfl' => 'Palatine German',
    'pi' => 'Pali',
    'pl' => 'Polish',
    'pms' => 'Piedmontese',
    'pnb' => 'Western Punjabi',
    'po' => 'Polish',
    'ps' => 'Pashto',
    'pt' => 'Portuguese',
    'qu' => 'Quechua',
    'rm' => 'Romansh',
    'rmy' => 'Romani',
    'rn' => 'Kirundi',
    'ro' => 'Romanian',
    'roa-rup' => 'Aromanian',
    'roa-tara' => 'Tarantino',
    'ru' => 'Russian',
    'rw' => 'Kinyarwanda',
    'sa' => 'Sanskrit',
    'sah' => 'Sakha',
    'sc' => 'Sardinian',
    'scn' => 'Sicilian',
    'sco' => 'Scots',
    'sd' => 'Sindhi',
    'se' => 'Northern Sami',
    'sg' => 'Sango',
    'sh' => 'Serbo-Croatian',
    'si' => 'Sinhalese',
    'simple' => 'Simple English',
    'sk' => 'Slovak',
    'sl' => 'Slovenian',
    'sm' => 'Samoan',
    'sn' => 'Shona',
    'so' => 'Somali',
    'sq' => 'Albanian',
    'sr' => 'Serbian',
    'srn' => 'Sranan',
    'ss' => 'Swati',
    'st' => 'Southern Sotho',
    'stq' => 'Saterland Frisian',
    'su' => 'Sundanese',
    'sv' => 'Swedish',
    'sw' => 'Swahili',
    'szl' => 'Silesian',
    'ta' => 'Tamil',
    'te' => 'Telugu',
    'tet' => 'Tetum',
    'tg' => 'Tajik',
    'th' => 'Thai',
    'ti' => 'Tigrinya',
    'tk' => 'Turkmen',
    'tl' => 'Tagalog',
    'tn' => 'Tswana',
    'to' => 'Tongan',
    'tpi' => 'Tok Pisin',
    'tr' => 'Turkish',
    'ts' => 'Tsonga',
    'tt' => 'Tatar',
    'tum' => 'Tumbuka',
    'tw' => 'Twi',
    'ty' => 'Tahitian',
    'udm' => 'Udmurt',
    'ug' => 'Uyghur',
    'uk' => 'Ukrainian',
    'ur' => 'Urdu',
    'uz' => 'Uzbek',
    've' => 'Venda',
    'vec' => 'Venetian',
    'vi' => 'Vietnamese',
    'vls' => 'West Flemish',
    'vo' => 'Volapuk',
    'wa' => 'Walloon',
    'war' => 'Waray',
    'wo' => 'Wolof',
    'xal' => 'Kalmyk',
    'xh' => 'Xhosa',
    'xmf' => 'Mingrelian',
    'yi' => 'Yiddish',
    'yo' => 'Yoruba',
    'za' => 'Zhuang',
    'zh' => 'Chinese',
    'zh-classical' => 'Classical Chinese',
    'zh-min-nan' => 'Min Nan',
    'zh-yue' => 'Cantonese',
    'zu' => 'Zulu',
];

function remove_lang_links(string $text): string
{

    $code_to_lang = $GLOBALS['MDWIKI_CODE_TO_LANG'];

    $langs = implode('|', array_keys($code_to_lang));

    preg_match_all("/\[\[($langs):[^\]]+\]\]/", $text, $matches);

    foreach ($matches[0] as $link) {
        $text = str_replace($link, '', $text);
    }

    return $text;
}
